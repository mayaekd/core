IdentitySpaceTransformation;

clusters = MakeManyHyperCubeClusters( ...
    [0 0 0], [1 1 1], [3 3 3], [2 2 10], [5 5 2], ...
    identitySpaceTransformation, "zMotorRowIndex", 3, ...
    "zPerceptualRowIndex", 3);

startingSpace = Space(clusters, identitySpaceTransformation, ...
    "MaxDistanceWithActivationM", 10, "MaxDistanceWithActivationP", 10);

% Center of base (2, 2, 0)
Region1 = WeightedMotorSimplicialComplex( ...
    [1 1 0; 3 1 0; 2 4 0; 2 2 2], [1 2 3 4], 1);
% Center of base (2, 5, 5)
Region2 = WeightedMotorSimplicialComplex( ...
    [1 4 5; 3 4 5; 2 7 5; 2 5 7], [1 2 3 4], 1);
% Center of base (2, 8, 10)
Region3 = WeightedMotorSimplicialComplex( ...
    [1 7 10; 3 7 10; 2 9 10; 2 8 12], [1 2 3 4], 1);
% Center of base (2, 11, 15)
Region4 = WeightedMotorSimplicialComplex( ...
    [1 10 15; 3 10 15; 2 12 15; 2 11 17], [1 2 3 4], 1);
% Center of base (2, 14, 10)
Region5 = WeightedMotorSimplicialComplex( ...
    [1 13 10; 3 13 10; 2 16 10; 2 14 12], [1 2 3 4], 1);
% Center of base (2, 17, 5)
Region6 = WeightedMotorSimplicialComplex( ...
    [1 16 5; 3 16 5; 2 19 5; 2 17 7], [1 2 3 4], 1);
% Center of base (2, 20, 0)
Region7 = WeightedMotorSimplicialComplex( ...
    [1 19 0; 3 19 0; 2 21 0; 2 20 2], [1 2 3 4], 1);

startingSilhouette = MotorSilhouette( ...
    [Region1 Region2 Region3 ...
    Region4 Region5 Region6 ...
    Region7]);

% Center of base (2, 2, 0)
% Center of base (2, 5, 5)
% Center of base (2, 8, 10)
% Center of base (2, 11, 15)
% Center of base (2, 14, 10)
% Center of base (2, 17, 5)
% Center of base (2, 20, 0)
exemplar = PerceptualTrajectory( ...
    [10 10 10 10 10 10 10 10 10 10 10; ...
    2 4.4 6.8 9.2 11.6 14 15.2 16.4 17.6 18.8 20; ...
    0 3 6 9 12 15 12 9 6 3 0], "zRowIndex", 3);

[GoalsOverTime, ActivationsOverTime, MResultsOverTime, ...
    PResultsOverTime] = LearnNewExemplarWithNoise( ...
    startingSpace, startingSilhouette, exemplar, 5, 1, 1, 0);
fullFigureData = FullFigureDataIdentitySpacesAll3D( ...
    GoalsOverTime, MResultsOverTime, ActivationsOverTime, 0, 2, 3);
fullFigureData.PlotFigures();